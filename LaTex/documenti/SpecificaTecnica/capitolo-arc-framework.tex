\section{Framework}

\subsection{Architettura Generale}
L'architettura che abbiamo scelto per la progettazione del framework è del tipo Model-View-Controller (MVC). La parte della View consiste nell'interfaccia grafica per l'utente (GUI) che permetterà la gestione di elementi grafici. La parte di Model permetterà la gestione degli elementi funzionali ed è composta dalla bubble memory e dalle API. La parte di Controller che consiste nella bubble generica si occuperà di gestire l'aggiornamento della GUI e l'invio delgli input dell'utente agli elementi funzionali.

\begin{figure}[H]
	\centering
	\includegraphics[width=14cm]{../../documenti/SpecificaTecnica/diagrammi_img/framework.png}
	\caption{Architettura framework}
\end{figure}

\subsection{Model}
Nella scomposizione logica in MVC la parte relativa al model, ossia la business logic dell'applicativo, è delegata alla bubble memory e ai pacchetti di metodi che compongono il framework. Questi metodi possono essere combinati tra loro e legati all'interfaccia grafica mediante il controller.

\subsection{Bubble Memory}
La componente di bubble memory gestisce la parte di persistenza della bubble in locale, tenendo traccia di variabili e del loro valore, incluso lo stato della bubble. La bubble memory è strutturata come un oggetto JavaScript, non avendo così vincoli relativamente al tipo di informazioni che è possibile inserire al suo interno.

\begin{samepage}
\subsubsection{Bubble memory}\label{fm-memory}
%\begin{figure}[H]
%	\centering
%	\includegraphics[width=14cm]{../../documenti/SpecificaTecnica/diagrammi_img/framework.png}
%	\caption{Bubble memory}
%\end{figure}	
\end{samepage}
\textbf{Descrizione:}\\
La bubble memory è la parte che si occupa di immagazzinare i dati relativi alla bubble. \\
\textbf{Scopo:}\\
Verrà usato come contenitore per le variabili degli elementi di input e output e lo stato della bubble.

\subsection{API del framework}
Ciascun package contiene classi di metodi, i quali garantiscono funzionalità che possono essere combinate nel corpo della bubble al fine di determinarne la business logic.\\
Data la natura del progetto non sono rappresentate connessioni tra i vari package riportati nel diagramma sopra, in quanto, essendo questa parte del prodotto un framework volto a garantire la possibilità di creare bubble interattive a sviluppatori terzi, verrà perseguito l'obiettivo di massimizzare l'indipendenza tra queste funzionalità in maniera tale da altrettanto massimizzare le possibilità di riutilizzo delle stesse.

\subsubsection{Package interni}

\begin{samepage}
\paragraph{Api::ciclo di vita della bubble}\label{api-ciclovita}\mbox{}\\
%\begin{figure}[H]
%	\centering
%	\includegraphics[width=14cm]{../../documenti/SpecificaTecnica/diagrammi_img/framework.png}
%	\caption{Api::ciclo di vita della bubble}
%\end{figure}
\end{samepage}
\textbf{Descrizione:}\\ 
Lo scopo di questo package è di gestire le operazioni legate al ciclo di vita della bubble\\
\textbf{Utilizzo:}\\
Si occupa di controllare la durata di vita della bubble interrompendo il funzionamento dopo un tempo prefissato\\

\begin{samepage}
\paragraph{Api::notifica}\label{api-notifica}\mbox{}\\
%\begin{figure}[H]
%	\centering
%	\includegraphics[width=14cm]{../../documenti/SpecificaTecnica/diagrammi_img/framework.png}
%	\caption{Api::notifica}
%\end{figure}
\end{samepage}
\textbf{Descrizione:}\\ 
I metodi presenti all'interno del package di notifica hanno lo scopo di creare e mostrare agli utenti delle notifiche collegate con le azioni della bubble. Se incluso nella bubble sarà possibile notificare del testo in modo statico.\\
\textbf{Scopo:}\\
Si occupa della gestione di notifiche statiche all'utente.\\

\begin{samepage}
\paragraph{Api::ApiEsterne}\label{api-esterne}\mbox{}\\
%\begin{figure}[H]
%	\centering
%	\includegraphics[width=14cm]{../../documenti/SpecificaTecnica/diagrammi_img/framework.png}
%	\caption{Api::ApiEsterne}
%\end{figure}
\end{samepage}
\textbf{Descrizione:}\\ 
Il package di chiamata delle API esterne aggiunge al framework la possibilità di effettuare internamente alla bubble chiamate di API REST di terze parti restituendo nella bubble memory il risultato di questa chiamata. \\
\textbf{Scopo:}\\
Si occupa di interfacciarsi con servizi terzi restituendo il risultato alla bubble memory.\\

\begin{samepage}
\paragraph{Api::Partecipanti}\label{api-partecipanti}\mbox{}\\
%\begin{figure}[H]
%	\centering
%	\includegraphics[width=14cm]{../../documenti/SpecificaTecnica/diagrammi_img/framework.png}
%	\caption{Api::Partecipanti}
%\end{figure}
\end{samepage}
\textbf{Descrizione:}\\ 
Gestisce le operazioni di gestione degli utenti e delle loro interazioni.\\
\textbf{Scopo:}\\
Questo package garantisce alla bubble la possibilità di avere accesso alla lista dei partecipanti alla chat e uno storico delle interazioni di ciascuno con essa.

\begin{samepage}
\paragraph{Api::Operazioni sul DB}\label{api-db}\mbox{}\\
%\begin{figure}[H]
%	\centering
%	\includegraphics[width=14cm]{../../documenti/SpecificaTecnica/diagrammi_img/framework.png}
%	\caption{Api::Operazioni sul DB}
%\end{figure}
\end{samepage}
\textbf{Descrizione:}\\
Nel package di operazioni sul DB sono racchiuse le funzionalità per connettersi ad un database non relazionale ed effettuare al suo interno operazioni di lettura e di scrittura.\\
\textbf{Scopo:}\\
Oltre alle normali operazioni sul database l'utente avrà la possibilità di utilizzare un database esterno.

\begin{samepage}
\paragraph{Api::Limitazioni input}\label{api-limiti}\mbox{}\\
%\begin{figure}[H]
%	\centering
%	\includegraphics[width=14cm]{../../documenti/SpecificaTecnica/diagrammi_img/framework.png}
%	\caption{Api::Limitazioni input}
%\end{figure}
\end{samepage}
\textbf{Descrizione:}\\
Controlla i vari input accettati dalle bubble, limitandone contenuto o numero di accessi.\\
\textbf{Scopo:}\\
In questo package sono contenute le funzionalità del framework relative alle limitazioni sull'input fornito alla bubble. Saranno quindi presenti metodi per consentire un numero limitato di interazioni pro capite con la bubble o un numero totale di interazioni effettuabili dagli utenti di Rocket.Chat che la utilizzino.\\
Saranno inoltre presenti dei metodi per verificare il match di un eventuale input testuale con un'espressione regolare e limitazioni sulla sua lunghezza massima. Nel caso l'input da validare sia in formato json (per esempio un valore ritornato dalla chiamata di un API REST esterna) è possibile verificare che al loro interno siano presenti determinate chiavi indicate.

\begin{samepage}
\paragraph{Api::Timing}\label{api-timing}\mbox{}\\
%\begin{figure}[H]
%	\centering
%	\includegraphics[width=14cm]{../../documenti/SpecificaTecnica/diagrammi_img/framework.png}
%	\caption{Api::Timing}
%\end{figure}
\end{samepage}
\textbf{Descrizione:}\\
Il package di timing si occupa della pianificazione dell'esecuzione di determinati metodi ad orari prestabiliti all'interno della bubble.\\
\textbf{Scopo:}\\
Verrà utilizzato per la gestione di scadenze o eventi ripetuti in modo automatico.

\begin{samepage}
\paragraph{Api::File}\label{api-file}\mbox{}\\
%\begin{figure}[H]
%	\centering
%	\includegraphics[width=14cm]{../../documenti/SpecificaTecnica/diagrammi_img/framework.png}
%	\caption{Api::File}
%\end{figure}
\end{samepage}
\textbf{Descrizione:}\\ 
Il package gestisce l'interazione della bubble con dei file.\\ 
\textbf{Scopo:}\\
Verrà usato come descritto nei casi d'uso per convertire del testo in PDF e salvare il file così prodotto.

\begin{samepage}
\paragraph{Api::ControlloJSON}\label{api-json}\mbox{}\\
%\begin{figure}[H]
%	\centering
%	\includegraphics[width=14cm]{../../documenti/SpecificaTecnica/diagrammi_img/framework.png}
%	\caption{Api::ControlloJSON}
%\end{figure}
\end{samepage}
\textbf{Descrizione:}\\ 
Il package permette il controllo di file JSON secondo uno schema specificato.\\ 
\textbf{Scopo:}\\
Verrà usato per verificare che il JSON prodotto sia conforme ad uno schema precedentemente fornito.

\begin{samepage}
\paragraph{Api::matchRegularExpr}\label{api-regexpr}\mbox{}\\
%\begin{figure}[H]
%	\centering
%	\includegraphics[width=14cm]{../../documenti/SpecificaTecnica/diagrammi_img/framework.png}
%	\caption{Api::matchRegularExpr}
%\end{figure}
\end{samepage}
\textbf{Descrizione:}\\ 
Il package permette di effettuare confronti con espressioni regolari.\\ 
\textbf{Scopo:}\\
\textbf{??}

\subsection{Controller}
\begin{samepage}
\subsubsection{Controller::BubbleGenerica}\label{fm-generica}
%\begin{figure}[H]
%	\centering
%	\includegraphics[width=14cm]{../../documenti/SpecificaTecnica/diagrammi_img/framework.png}
%	\caption{Controller::BubbleGenerica}
%\end{figure}
\end{samepage}
\textbf{Descrizione:}\\
La componente del software che funge da controller nello schema MVC è la classe bubble generica.\\
\textbf{Scopo:}\\
Serve a rilevare i comandi ricevuti dall'utente tramite la GUI e propagarli alla business logic garantendo la separazione tra presentazione e contenuto. Al suo interno è definita l'interazione tra le varie parti, l'utilizzo delle API e della bubble memory al fine di massimizzare le possibilità di creare bubble date a sviluppatori di terze parti che utilizzano il framework.

\begin{samepage}
\subsection{View}
%\begin{figure}[H]
%	\centering
%	\includegraphics[width=14cm]{../../documenti/SpecificaTecnica/diagrammi_img/framework.png}
%	\caption{View}
%\end{figure}
\end{samepage}
\textbf{Descrizione:}\\
La parte di View dedicata alla gestione dell'interfaccia utente del framework è strutturata come mostrato nel diagramma delle classi riportato sopra.
Ogni elemento dell GUI, come button, text editor o label, implementa l'interfaccia GUI specificando opportunamente le funzioni a seconda che gli elementi siano di output o di input.\\
Gli elementi della GUI possono essere inseriti e raggruppati in un contenitore (GUI container). In questo modo il Controller potrà organizzare in modo più semplice lo scambio di informazioni tra la parte Model e quella View, inserendo diversi elementi di GUI relativi ad una specifica funzionalità in un unico container.

\subsubsection{Classi}

\paragraph{View::Gui}\label{gui}\mbox{}\\
\textbf{Descrizione:}\\
L'interfaccia GUI racchiude i dati riguardanti la visibilità e l'aggiornamento e offre le funzionalità di gestione dell'evento che andranno poi specificate in ogni classe che implementerà questa interfaccia.\\
\textbf{Utilizzo:}\\
Questa classe viene usata per gestire gli eventi degli elementi grafici.

\paragraph{View::Gui::container}\label{gui-container}\mbox{}\\
\textbf{Descrizione:}\\
La classe contiene una collezione di uno o più elementi della GUI.\\ 
\textbf{Utilizzo:}\\
Questa classe permette l'inserimento, la manipolazione e la rimozione di elementi dall'interno della collezione della GUI. 

\paragraph{View::Gui::Label}\label{gui-label}\mbox{}\\
\textbf{Descrizione:}\\
La classe Label offre all'interno del framework la possibilità di utilizzare l'equivalente presente in HTML.\\
\textbf{Utilizzo:}\\
Questa classe offre la possibilità di renderizzare un output nella bubble.\\
\textbf{Relazioni con le altre classi:}\\
Questa classe rappresenta un elemento grafico, deriva da GUI e ne eredita i metodi.\\

\paragraph{View::Gui::File}\label{gui-file}\mbox{}\\
\textbf{Descrizione:}\\
Componente progettato per consentire alla bubble e al suo utilizzatore finale l'interazione con file generici.\\
\textbf{Utilizzo:}\\
Consente il caricamento di file nella bubble da parte dell'utente e permette alla stessa di rendere file generici disponibili ai suoi utilizzatori.\\
\textbf{Relazioni con le altre classi:}\\
Questa classe rappresenta un elemento grafico, deriva da GUI e ne eredita i metodi.\\

\paragraph{View::Gui::Button}\label{gui-button}\mbox{}\\
\textbf{Descrizione:}\\
Classe che permette di inserire nella bubble un oggetto di tipo bottone, per permettere alla stessa di interagire con i suoi utilizzatori.\\
\textbf{Utilizzo:}\\
Fornisce alla bubble la possibilità di interagire con l'utente suo utilizzatore mediante un bottone.\\
\textbf{Relazioni con le altre classi:}\\
Questa classe rappresenta un elemento grafico, deriva da GUI e ne eredita i metodi.\\

\paragraph{View::Gui::Text editor}\label{gui-teditor}\mbox{}\\
\textbf{Descrizione:}\\
Classe volta a fornire una funzionalità di interazione con l'utente mediante la modifica di testo.\\
\textbf{Utilizzo:}\\
Consentire all'utente l'inserimento nella bubble di testo ove fosse necessario.\\
\textbf{Relazioni con le altre classi:}\\
Questa classe rappresenta un elemento grafico, deriva da GUI e ne eredita i metodi.\\

\paragraph{View::Gui::TextView}\label{gui-tview}\mbox{}\\
\textbf{Descrizione:}\\
Classe volta alla realizzazione di un elemento in grado di mostrare all'utente del testo non modificabile.\\
\textbf{Utilizzo:}\\
Consentire all'utente la visualizzazione di testo nella bubble.\\
\textbf{Relazioni con le altre classi:}\\
Questa classe rappresenta un elemento grafico, deriva da GUI e ne eredita i metodi.\\

\paragraph{View::Gui::Image}\label{gui-image}\mbox{}\\
\textbf{Descrizione:}\\
La classe permette di estendere le funzionalità della bubble mediante l'interazione con immagini.\\
\textbf{Utilizzo:}\\
Consentire nella bubble la visualizzazione di immagini.\\
\textbf{Relazioni con le altre classi:}\\
Questa classe rappresenta un elemento grafico, deriva da GUI e ne eredita i metodi.\\

\paragraph{View::Gui::Check button}\label{gui-check}\mbox{}\\
\textbf{Descrizione:}\\
La classe check button porta all'interno del framework la possibilità di utilizzare l'equivalente presente in HTML.\\
\textbf{Utilizzo:}\\
L'utilizzo di questa classe è quello di fornire un bottone selezionabile.\\
\textbf{Relazioni con le altre classi:}\\
Questa classe rappresenta un elemento grafico, deriva da GUI e ne eredita i metodi.\\

\paragraph{View::Gui::Radio button}\label{gui-radio}\mbox{}\\
\textbf{Descrizione:}\\
La classe radio button porta all'interno del framework la possibilità di utilizzare l'equivalente presente in HTML.\\
\textbf{Utilizzo:}\\
L'utilizzo di questa classe è quello di fornire un bottone selezionabile in modo esclusivo.\\
\textbf{Relazioni con le altre classi:}\\
Questa classe rappresenta un elemento grafico, deriva da GUI e ne eredita i metodi.\\

\paragraph{View::Gui::PieChart}\label{gui-pie}\mbox{}\\
\textbf{Descrizione:}\\
La classe PieChart porta all'interno del framework la possibilità di utilizzare grafici a torta.\\
\textbf{Utilizzo:}\\
L'utilizzo di questa classe è quello di fornire un grafico a torta per l'elaborazione grafica di dati.\\
\textbf{Relazioni con le altre classi:}\\
Questa classe rappresenta un elemento grafico, deriva da GUI e ne eredita i metodi.\\

\paragraph{View::Gui::BarChart}\label{gui-bar}\mbox{}\\
\textbf{Descrizione:}\\
La classe BarChart porta all'interno del framework la possibilità di utilizzare grafici a istogramma.\\
\textbf{Utilizzo:}\\
L'utilizzo di questa classe è quello di fornire un grafico a istogramma per l'elaborazione grafica di dati.\\
\textbf{Relazioni con le altre classi:}\\
Questa classe rappresenta un elemento grafico, deriva da GUI e ne eredita i metodi.\\